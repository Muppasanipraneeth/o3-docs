import Image from "next/image";

# Comment configurer les traductions dans O3

Il existe plusieurs catégories de traductions au sein de notre projet de logiciel:

- dans le code : Nous utilisons un outil appelé [Transifex](https://explore.transifex.com/openmrs/) pour extraire automatiquement les mots codés en dur (par exemple, "Cliquez ici"), les traduire dans l'interface utilisateur Transifex et renvoyer ces traductions à l'O3 RefApp.
- dans les formulaires
- dans la terminologie : par exemple, le code CIEL 121375 pour l'asthme est associé à plusieurs traductions existantes ([comme vous pouvez le voir ici](https://app.openconceptlab.org/#/orgs/CIEL/sources/CIEL/concepts/121375/)). Si vous utilisiez ce code et souhaitiez une nouvelle option linguistique, il faudrait l'ajouter en tant que métadonnée à ce concept.

## Utilisation de Transifex

### Comment traduire les éléments codés du Frontend d'OpenMRS via Transifex

Vous pouvez trouver le tutoriel OpenMRS Transifex [ici](https://mekom.notion.site/Translating-OpenMRS-frontend-via-Transifex-398836d729ff46d0b30232daa2c59945). Les questions ou les commentaires sur ce tutoriel peuvent être partagés dans [ce fil de discussion](https://talk.openmrs.org/t/translating-openmrs-frontend-via-transifex/37490).

Des conseils sur l'utilisation de Transifex pour les anciens modules OpenMRS (OMOD) sont disponibles [ici](https://wiki.openmrs.org/display/docs/Maintaining+OpenMRS+Module+Translations+via+Transifex). Des conseils sur l'intégration de Transifex avec les dépôts OpenMRS en général sont également discutés [ici](https://talk.openmrs.org/t/transifex-integration-with-openmrs-repositories/34557).

### Comment ingérer le contenu d'une chaîne d'application depuis Transifex dans O3 RefApp

Résumé : _Les fichiers de traduction devront être extraits de Transifex et intégrés au code directement, pour chaque repo._

- _Etape 1 : Installation de Transifex:_ Assurez-vous que les dépôts O3 dont vous avez besoin sont inclus dans le projet OpenMRS Org Transifex 4 (par exemple, vous pouvez voir esm-patient-management est ici 1, esm-patient-chart est ici 1, etc).

- _Étape 2 : Traduction complète dans l'interface Transifex:_ Assurez-vous que votre équipe de traduction passe par l'interface pour traduire les chaînes de chaque repo (voir le guide de l'interface ci-dessus).

- _Etape 3 : Workflow manuel simple pour exporter JSON depuis Transifex et télécharger vers O3:_

  - _Exporter JSON depuis Transifex:_ Dans la navigation de gauche, cliquez sur Ressources pour le Repo, puis cliquez sur la langue que vous voulez, et cliquez sur "Télécharger pour utiliser" à partir de la fenêtre modale Ressources qui s'est affichée. Cela télécharge un fichier JSON pour vous.

    ![Modale Transifex pour télécharger un export JSON](/transifex-download-json-export.png)

  - _Télécharger JSON dans le répertoire esm-NAME-app/translations/ du repo:_ E.g. [cet exemple](https://github.com/openmrs/openmrs-esm-patient-management/tree/main/packages/esm-active-visits-app/translations) de traductions de chaînes JSON téléchargées pour l'application de visites active.

  - _Dans ce cas:_ Les chaînes de caractères doivent être traduites dans l'interface utilisateur lorsque l'utilisateur change de langue.

    ![Interface utilisateur du commutateur de langues](/translation-locale-switcher.png)

- _Alternative à l'étape 3 : flux de travail automatisé:_ Cela peut également être fait en utilisant la fonction [CLI Client Transifex](https://developers.transifex.com/docs/cli) et en cours d'exécution `tx pull -l fr` (pour obtenir la locale fr par exemple) et valider les modifications.

## Remplacements de traduction spécifiques à un module O3 individuel

Vous pouvez utiliser le système de configuration pour fournir des traductions localisées pour les composants O3. C'est utile si, par exemple, vous voulez changer l'étiquette d'un bouton ou renommer un lien. Ce système ne doit pas être utilisé pour traduire les composants dans une nouvelle langue. Aidez-nous plutôt à ajouter ces traductions directement dans RefApp en utilisant [Transifex](https://explore.transifex.com/openmrs/).

Par exemple, si vous souhaitez renommer l'action "Commencer une visite" dans le dossier du patient, vous pouvez utiliser cette configuration:

```json
{
  "@openmrs/esm-patient-chart-app": {
    "Translation overrides": {
      "en": {
        "startVisit": "Check-in"
      }
    }
  }
}
```

Les dérogations de traduction, comme celle-ci, peuvent être fournies à n'importe quel niveau de configuration, y compris la configuration d'un slot particulier ou d'une extension dans un slot. Notez que la chaîne "Translation overrides" doit être exactement dans ce cas, la clé, comme "en" doit être la langue locale pour laquelle vous souhaitez remplacer la traduction et la clé de traduction, par exemple "startVisit" doit correspondre à ce qui se trouve dans le fichier de traduction pour la langue locale que vous souhaitez remplacer. Plusieurs langues peuvent être spécifiées en utilisant plusieurs clés, par exemple "en" et "fr" pour remplacer le texte en anglais et en français.
